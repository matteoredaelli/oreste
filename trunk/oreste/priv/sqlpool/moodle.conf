{users_without_idnumber, 
	"select username, lastname, firstname, email, institution 
	from
		mdl_user 
	where
		auth='ldap' and 
		(icq='EMP' or icq='') and
		idnumber not like 'HR%' and 
		idnumber not like 'LL-%'
	order by lastname,firstname,username"
}.
{user, 
	"select *
	from
		mdl_user 
	where
		username='{username}'"
}.

{courses_attendance_confirmed_facetoface,
"select  
	cm.idnumber as course_id,
	min( FROM_UNIXTIME(d1.timestart,'%d%m%Y') ) as start_date,
	max( FROM_UNIXTIME(d2.timestart,'%d%m%Y') ) as end_date,
	replace(u.idnumber, 'HR', '') as cid,
	u.lastname as lastname,
	u.firstname as firstname,
	'50009242' as sessionid
from
	mdl_course c,
	mdl_course_modules cm,
	mdl_facetoface f,
	mdl_facetoface_submissions s,
	mdl_facetoface_sessions fs,
	mdl_user u,
	mdl_grade_grades gg, 
	mdl_grade_items gi,
	mdl_facetoface_sessions_dates d1,
	mdl_facetoface_sessions_dates d2
where
        FROM_UNIXTIME(gg.timemodified,'%Y%m%d') >= {from} and
        FROM_UNIXTIME(gg.timemodified,'%Y%m%d') <= {to} and
	c.id = f.course and
	cm.module=19 and
	cm.instance = f.id and
	f.id = s.facetoface and
	s.sessionid = fs.id and
	s.timecancelled=0 and
	f.id = fs.facetoface and
	s.userid = u.id and
	u.auth = 'ldap' and
	(u.icq='EMP' or u.icq='') and
	u.id = gg.userid and 
	c.id = gi.courseid and 
	gi.id=gg.itemid and 
   gi.courseid=f.course and
	gi.itemtype='mod' and 
	itemmodule='facetoface' and
       d1.sessionid = s.sessionid and
       d2.sessionid = s.sessionid
group by
       c.idnumber,
       fs.id,
       u.lastname,
       u.firstname
order by
	start_date,
	end_date,
	c.idnumber,
       u.lastname,
       u.firstname"
}.

{courses_attendance_confirmed_scorm,
"
select 
	substring_index(gi.idnumber, '-',1) as course_id,
	FROM_UNIXTIME(gg.timemodified,'%d%m%Y') as start_date,
	FROM_UNIXTIME(gg.timemodified,'%d%m%Y') as end_date,
	replace(u.idnumber, 'HR', '') as cid,
	u.lastname as lastname,
	u.firstname as firstname,
	'50009242' as sessionid
from 
	mdl_grade_items gi,
	mdl_grade_grades gg,
	mdl_user u,
	mdl_course c
where 
	gg.userid=u.id and 
	gg.itemid=gi.id and 
	gi.courseid=c.id and 
	gi.itemtype='mod' and
	gi.itemmodule='scorm' and
	u.auth = 'ldap' and
	(u.icq='EMP' or u.icq='') and
        FROM_UNIXTIME(gg.timemodified,'%Y%m%d') >= {from} and
        FROM_UNIXTIME(gg.timemodified,'%Y%m%d') <= {to} and
	gg.finalgrade >= gi.grademax * 0.8"
}.

{courses_without_idnumber,
"
SELECT ca.name as category_name, co.id as course_id, co.fullname 
FROM 
	mdl_course co,
	mdl_course_categories ca
WHERE
	co.category = ca.id and
	co.idnumber=''
order by co.idnumber
"
}.

{course,
"
SELECT co.id, co.idnumber, co.fullname
FROM 
	mdl_course co
WHERE
	co.id='{id}' or co.idnumber='{id}'
"
}.

{course_sessions,
"
select 
	co.id,
	co.idnumber,
	co.shortname,
	fs.capacity,
	fs.duration,
	fs.location,
	fs.venue,
	FROM_UNIXTIME(fsd.timestart,'%Y%m%d') as start_date,
	FROM_UNIXTIME(fsd.timefinish,'%Y%m%d') as end_date
from 
	mdl_course as co,
	mdl_facetoface as f,
	mdl_facetoface_sessions as fs,
	mdl_facetoface_sessions_dates as fsd
where
	co.id = f.course and
	f.id = fs.facetoface and
	fs.id = fsd.sessionid and
	(co.id={courseid} or co.idnumber='{courseid}')
"
}.

